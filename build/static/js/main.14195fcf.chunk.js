(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{225:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(85),o=n.n(c),l=n(5),i=n(6),u=n(8),s=n(7),m=n(9),d=(n(97),n(2)),f=n(14),h=n(3);function p(){var e=Object(d.a)(["\n    line-height: 0px;\n    min-width: 100px;\n  "]);return p=function(){return e},e}function b(){var e=Object(d.a)(["\n    background: #d0fff6;\n    width: 50%;\n    margin: 1em auto;\n    padding: 1em 0;\n    list-style: none;\n    flex-direction: column;\n    min-width: 100px;\n  "]);return b=function(){return e},e}function g(){var e=Object(d.a)(["\n    width: 90%;\n    margin-left: auto;\n    margin-right: auto;\n    background: #e1eff6;\n    border-radius: 25px;\n  "]);return g=function(){return e},e}function v(){var e=Object(d.a)(["\n    border: 2px solid #eccbd9;\n    border-radius: 25px;\n    background: #afb3f7;\n    width: 100%;\n    margin-top: 5vh;\n    margin-bottom: 15vh;\n    color: #15212e;\n    -webkit-box-shadow: 3px 3px 0px 1px #f2dde6;\n    -moz-box-shadow: 3px 3px 0px 1px #f2dde6;\n    box-shadow: 3px 3px 0px 1px #f2dde6;\n  "]);return v=function(){return e},e}function E(e){var t=e.title,n=e.author,a=e.topic,c=e.votes,o=e.commentCount,l=e.createdAt,i=Object(f.distanceInWords)(l,new Date),u=h.a.section(v()),s=h.a.h1(g()),m=h.a.ul(b()),d=h.a.p(p());return r.a.createElement(u,null,r.a.createElement(s,null,t),r.a.createElement(m,null,r.a.createElement("li",null,r.a.createElement("h3",null,"by: ",n)),r.a.createElement("li",null,r.a.createElement("h4",null,"Topic: ",a)),r.a.createElement("li",null,r.a.createElement(d,null,"Votes: ",c)),r.a.createElement("br",null),r.a.createElement("li",null,r.a.createElement(d,null,"Comments: ",o)),r.a.createElement("br",null),r.a.createElement("li",null,r.a.createElement(d,null,"Created:")),r.a.createElement("li",null,r.a.createElement(d,null," ","".concat(i," ago")))))}var y=n(88),w=n.n(y).a.create({baseURL:"https://rich-james-nc-news.herokuapp.com/api/"}),j=function(e,t){return w.get("/articles",{params:{topic:e,sort_by:t}}).then(function(e){return e.data.articles})},x=function(e){return w.get("/articles/".concat(e)).then(function(e){return e.data.article})},O=function(e){return w.get("articles/".concat(e,"/comments")).then(function(e){return e.data.comments})},k=function(e,t){return w.post("articles/".concat(e.article_id,"/comments"),e).then(function(e){return e})},C=function(e,t){return w.patch("/articles/".concat(e),{inc_votes:t}).then(function(e){return e.data.votes})},S=function(e){return w.delete("comments/".concat(e))},_=n(10);function D(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"loader"}))}function I(){var e=Object(d.a)(["\n  border: 2px solid #eccbd9;\n  border-radius: 25px;\n  width: 50%;\n  margin-left: auto;\n  margin-right: auto;\n  padding-bottom: 1em;\n  padding-top: 1em;\n  background: #6fb1fc;\n  -webkit-box-shadow: 3px 3px 0px 1px #f2dde6;\n  -moz-box-shadow: 3px 3px 0px 1px #f2dde6;\n  box-shadow: 3px 3px 0px 1px #f2dde6;\n"]);return I=function(){return e},e}var A=h.a.section(I());function B(e){return r.a.createElement(A,null,r.a.createElement("h4",null,"Sort By:"),r.a.createElement("br",null),r.a.createElement("form",{onChange:e.dropDownSubmit},r.a.createElement("select",{name:"sort-by"},r.a.createElement("option",{value:"created_at"},"Date Created"),r.a.createElement("option",{value:"comment_count"},"Comment Count"),r.a.createElement("option",{value:"votes"},"Votes"))))}function U(){var e=Object(d.a)(['\n  padding-left: 10vw;\n  padding-right: 10vw;\n  padding-top: 2vh;\n  background: #e1eff6;\n  width: 50vw;\n  min-height: 50vw;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 15vh;\n  margin-bottom: 15vh;\n  font-family: "Roboto", sans-serif;\n  border: 2px solid #6fb1fc;\n  border-radius: 25px;\n']);return U=function(){return e},e}var V=h.a.section(U()),M=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={topics:[],articles:[],hasError:!1,loading:!0,sortBy:"created_at"},n.dropDownSubmit=function(e){n.setState({sortBy:e.target.value})},n.fetchArticles=function(e,t){j(e,t).then(function(e){return n.setState({articles:e,loading:!1,hasError:!1})}).catch(function(e){return n.setState({errMsg:e.response.data.msg,hasError:e,loading:!1})})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(V,null,this.state.loading?r.a.createElement(D,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{dropDownSubmit:this.dropDownSubmit}),this.state.articles.map(function(e){return r.a.createElement(_.a,{to:"/article/".concat(e.article_id),key:e.title},r.a.createElement(E,{author:e.author,title:e.title,topic:e.topic,votes:e.votes,commentCount:e.comment_count,createdAt:e.created_at}))})))}},{key:"componentDidMount",value:function(){var e=this,t=this.props.topic;this.fetchArticles(t),j(t).then(function(t){e.setState({articles:t})})}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.topic,a=this.state.sortBy,r=e.topic!==n,c=t.sortBy!==a;(r||c)&&this.fetchArticles(n,a)}}]),t}(a.Component),W=n(38),N=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={voteChange:0},n.handleVote=function(e){var t=n.props.article_id;C(t,e).catch(function(t){n.setState(function(t){return{voteChange:t.voteChange-e}})}),n.setState(function(t){return{voteChange:t.voteChange+e}})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.voteChange,n=this.props.votes;return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return e.handleVote(1)},disabled:t>0},r.a.createElement("i",{className:"fas fa-thumbs-up"})),"Votes: ",n+t,r.a.createElement("button",{onClick:function(){return e.handleVote(-1)},disabled:t<0},r.a.createElement("i",{className:"fas fa-thumbs-down"})))}}]),t}(a.Component);function F(e){var t=e.comment,n=e.handleDelete,a=e.username;return r.a.createElement("div",{key:t.body},t.author===a&&r.a.createElement("button",{onClick:function(){return n(t.comment_id)}},"Delete"),r.a.createElement("p",null,t.body),r.a.createElement("h4",null,t.author),r.a.createElement("p",null,"Votes: ",t.votes),r.a.createElement("p",null,"".concat(Object(f.distanceInWords)(t.created_at,new Date)," ago")),r.a.createElement("div",null,r.a.createElement(N,{votes:t.votes,comment_id:t.comment_id})))}function J(){var e=Object(d.a)([""]);return J=function(){return e},e}function R(){var e=Object(d.a)([""]);return R=function(){return e},e}function z(){var e=Object(d.a)(["\n  width: 40vw;\n  height: 500;\n"]);return z=function(){return e},e}var q=h.a.section(z()),P=h.a.section(R()),T=h.a.section(J()),Y=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={comments:[],commentBody:"",loading:!0,hasError:!1,errorMsg:""},n.handleChange=function(e){n.setState({commentBody:e.target.value})},n.handleSubmit=function(e){var t=n.props.articleId,a=n.props.loggedInUser.username;e.preventDefault();var r={article_id:t,username:a,body:n.state.commentBody};k(r,t).then(function(e){var t=e.data.comment;n.setState(function(e){return{comments:[t].concat(Object(W.a)(e.comments)),commentBody:""}})}).catch(function(e){return console.log(e)})},n.fetchComments=function(e){O(e).then(function(e){return n.setState({comments:e,loading:!1}).catch(console.log)})},n.handleDelete=function(e){var t=n.state.comments;S(e).then(function(a){n.setState(function(n){return{comments:Object(W.a)(t.filter(function(t){return t.comment_id!==e}))}})}).catch(function(e){console.log(e)})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=(this.state.comments,this.props),n=t.votes,a=t.articleId,c=this.props.loggedInUser.username;return r.a.createElement("div",null,r.a.createElement(q,null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"userComment",placeholder:"Write your comment here",value:this.state.commentBody,onChange:this.handleChange,required:!0}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Submit"}))),r.a.createElement(P,null,r.a.createElement(N,{votes:n,article_id:a})),r.a.createElement(T,null,r.a.createElement("h2",null,"Comments:"),this.state.comments.map(function(t){return r.a.createElement(F,{handleDelete:e.handleDelete,username:c,comment:t,key:t.comment_id})})))}},{key:"componentDidMount",value:function(){var e=this.props.articleId;this.fetchComments(e)}}]),t}(a.Component);function L(){var e=Object(d.a)(["\n  display: flex;\n  justify-items: space-between;\n  width: 100%;\n"]);return L=function(){return e},e}function G(){var e=Object(d.a)(["\n  text-align: left;\n"]);return G=function(){return e},e}function H(){var e=Object(d.a)(['\n  padding-left: 10vw;\n  padding-right: 10vw;\n  padding-top: 2vh;\n  background: #e1eff6;\n  width: 50vw;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 15vh;\n  margin-bottom: 15vh;\n  font-family: "Roboto", sans-serif;\n  border: 2px solid #6fb1fc;\n  border-radius: 25px;\n']);return H=function(){return e},e}var K=h.a.section(H()),Q=h.a.div(G()),X=h.a.ul(L()),Z=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={article:{},comments:[],hasError:!1,loading:!0},n.fetchArticles=function(e){x(e).then(function(e){return n.setState({article:e,loading:!1,hasError:!1})}).catch(function(e){n.setState({hasErr:!0,loading:!1,errMsg:e.response.data.msg})})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.article,t=e.author,n=e.body,a=e.comment_count,c=e.created_at,o=e.title,l=e.topic,i=e.votes,u=Object(f.distanceInWords)(c,new Date),s=this.props.article_id;return r.a.createElement(K,null,this.state.loading?r.a.createElement(D,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,o),r.a.createElement("h2",null,"By ",t),r.a.createElement("br",null),r.a.createElement(Q,null,n,r.a.createElement(X,null,r.a.createElement("li",null,"Comments: ",a),r.a.createElement("li",null,"Written: ".concat(u," ago")),r.a.createElement("li",null,"Votes: ",i),r.a.createElement("li",null,"Topic: ",l))),r.a.createElement(Y,{articleId:s,votes:i,loggedInUser:this.props.loggedInUser})))}},{key:"componentDidMount",value:function(){var e=this.props.article_id;this.fetchArticles(e)}}]),t}(a.Component);function $(){var e=Object(d.a)(["\n    border: 1px solid #6fb1fc;\n    padding: 0.5em;\n    width: 100%;\n  "]);return $=function(){return e},e}function ee(e){var t=h.a.span($());return r.a.createElement("nav",null,r.a.createElement("ul",null,e.topics.map(function(e){return r.a.createElement(t,{key:e.slug},r.a.createElement(_.a,{to:"/topics/".concat(e.slug)},r.a.createElement("li",null,e.slug)))}),r.a.createElement(t,null,r.a.createElement(_.a,{to:"/"},r.a.createElement("li",null,"view all articles")))))}function te(){var e=Object(d.a)(["\n  height: 2px;\n  display: inline-block;\n"]);return te=function(){return e},e}var ne=h.a.div(te());function ae(){return r.a.createElement(ne,null,r.a.createElement("p",null,"You are logged in as: a user"))}function re(){var e=Object(d.a)(["\n  font-size: 70px;\n"]);return re=function(){return e},e}function ce(){var e=Object(d.a)(["\n  display: inline-block;\n"]);return ce=function(){return e},e}function oe(){var e=Object(d.a)(["\n  background: #0052d4; /* fallback for old browsers */\n  background: -webkit-linear-gradient(\n    to right,\n    #6fb1fc,\n    #4364f7,\n    #0052d4\n  ); /* Chrome 10-25, Safari 5.1-6 */\n  background: linear-gradient(\n    to right,\n    #6fb1fc,\n    #4364f7,\n    #0052d4\n  ); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */\n"]);return oe=function(){return e},e}function le(){var e=Object(d.a)(["\n  display: flex;\n  justify-content: space-around;\n  background: #0052d4; /* fallback for old browsers */\n  background: -webkit-linear-gradient(\n    to right,\n    #6fb1fc,\n    #4364f7,\n    #0052d4\n  ); /* Chrome 10-25, Safari 5.1-6 */\n  background: linear-gradient(\n    to right,\n    #6fb1fc,\n    #4364f7,\n    #0052d4\n  ); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */\n"]);return le=function(){return e},e}function ie(){var e=Object(d.a)(['\n  display: grid;\n  grid-template-rows: 1fr, 1fr;\n  color: white;\n  font-family: "Josefin Sans", sans-serif;\n']);return ie=function(){return e},e}var ue=h.a.header(ie()),se=h.a.span(le()),me=h.a.span(oe()),de=h.a.div(ce()),fe=h.a.span(re());function he(e){return r.a.createElement(ue,null,r.a.createElement(_.a,{to:"/"},r.a.createElement(se,null,r.a.createElement("h1",null,"NC News"),r.a.createElement(fe,null,r.a.createElement("i",{className:"far fa-newspaper"})),r.a.createElement(de,null,r.a.createElement(ae,null)))),r.a.createElement(me,null,r.a.createElement(ee,{topics:e.topics})))}function pe(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Error"),r.a.createElement("h2",null,"Page not found"))}var be=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={topics:[],loggedInUser:{username:"jessjelly",avatar:"https://i.ytimg.com/vi/RUP4dCucVnY/hqdefault.jpg",name:"Jess Jelly"}},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.topics;return r.a.createElement("div",{className:"App"},r.a.createElement(he,{topics:e}),r.a.createElement(_.b,null,r.a.createElement(M,{path:"/"}),r.a.createElement(M,{path:"/topics/:topic"}),r.a.createElement(Z,{loggedInUser:this.state.loggedInUser,path:"/article/:article_id"}),r.a.createElement(pe,{default:!0})))}},{key:"componentDidMount",value:function(){var e=this;w.get("topics").then(function(e){return e.data.topics}).then(function(t){return e.setState({topics:t})})}}]),t}(a.Component);n(224);o.a.render(r.a.createElement(be,null),document.getElementById("root"))},92:function(e,t,n){e.exports=n(225)},97:function(e,t,n){}},[[92,1,2]]]);
//# sourceMappingURL=main.14195fcf.chunk.js.map